"use strict";(()=>{var le=Object.defineProperty;var ie=(t,e)=>{for(var r in e)le(t,r,{get:e[r],enumerable:!0})};var R={};ie(R,{Model:()=>Oe,apply:()=>re,attachedSpecSymbol:()=>z,fromSpecSymbol:()=>pe,isPromise:()=>H,keys:()=>te,newKeySymbol:()=>F,presets:()=>Z,propertiesRegistrySymbol:()=>be,removeSymbol:()=>Y,transfer:()=>I,valueSymbol:()=>d,values:()=>ne});var X=Object.defineProperty,ae=Object.defineProperties,se=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,Q=(t,e,r)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,w=(t,e)=>{for(var r in e||(e={}))ce.call(e,r)&&Q(t,r,e[r]);if(L)for(var r of L(e))fe.call(e,r)&&Q(t,r,e[r]);return t},ue=(t,e)=>ae(t,se(e)),ye=(t,e)=>{for(var r in e)X(t,r,{get:e[r],enumerable:!0})},d=Symbol("value"),Y=Symbol("remove"),F=Symbol("newKey"),z=Symbol("hasAttachedSpec"),pe=Symbol("fromSpec"),be=Symbol("propertiesRegistry"),Z={};ye(Z,{objectify:()=>_});var q={},V=["Object","Array","Map","Set","Number","Boolean","String","Date","RegExp","Function","Promise","Symbol","BigInt","Error","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint16Array","Uint32Array","Uint8ClampedArray","ArrayBuffer","SharedArrayBuffer"];function G(t){var e,r=[];if(t)do{let n=(e=t.constructor)==null?void 0:e.name,c=V.includes(n);V.includes(n)&&(q[n]||(q[n]=[...Object.getOwnPropertyNames(globalThis[n].prototype)])),Object.getOwnPropertyNames(t).forEach(function(l){c&&q[n].includes(l)||r.indexOf(l)===-1&&r.push(l)})}while(t=Object.getPrototypeOf(t));return r}var I=(t,e,r)=>(new Set([...G(e),...Object.getOwnPropertySymbols(e)]).forEach(n=>{if(!(n in t)&&n!==d){let c=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r?w(w({},c),r):c)}}),t),_=(t,e)=>{let r=e==null?void 0:e.constructor;if(Array.isArray(e)){let n=e;e=[],e=I(e,n)}else if(r){let n=e;Array.isArray(e)?e=[...e]:e=new r(e),e=I(e,n)}else if(!e){let n=e;e=Object.create(null),Object.defineProperty(e,d,{value:n})}return e},H=t=>t&&typeof t=="object"&&typeof t.then=="function";function ve(t){return!isNaN(parseFloat(t))&&isFinite(t)}var T=Symbol("unresolved");function ge(t,e,r){return t in e||r in e}function me(t,e,r){return t in e?t:r in e?r:void 0}function $(t,e,r){var n;return t in e&&(n=e[t])!=null?n:e[r]}var B=(t,e,r={},n={},c=[],l=[],P={})=>{var h;let S=l.length===0;S&&l.push(t);let v=n.target===t,i=v?l[l.length-1]:S?(h=n.target)!=null?h:{}:t;if(F in i)return t;{let O=new Set([...G(t),...Object.getOwnPropertySymbols(t)]);O.delete("constructor");let o=new Set([...G(e),...e?Object.getOwnPropertySymbols(e):[]]),g=new Set(o),u={willUpdateOriginal:v},y=(s,j=l)=>{s===d||typeof s=="string"&&ve(s)||ee(s,c,j,i,r,e,n,u).forEach(m=>{o.delete(m),g.add(m)})},A=i;return P.properties!==!1&&O.forEach(s=>y(s)),P.specification!==!1&&o.forEach(s=>y(s)),F in i||Object.defineProperty(i,F,{value:(s,j,m)=>{let b=[...l],D=b[b.length-1]=v?t:w({},t);if(D[s]=j,m){let U=w({},m);!m.get&&!m.set&&(U.value=j),Object.defineProperty(e,s,U)}else e[s]=void 0;y(s,b)},writable:!1,configurable:!1}),globalThis.Proxy?A=new Proxy(i,{set(s,j,m){return g.has(j)?(s[j]=m,!0):!1}}):console.warn("[esconform] Proxy not available. Unregistered property setters will not be intercepted."),A}},ee=(t,e,r,n,c,l={},P={},h)=>{var S;let v=h.willUpdateOriginal,i=r[r.length-1],O=[...e,t],o=T,g=[],u=i?w({},Object.getOwnPropertyDescriptor(i,t)):{},y=c.keys?c.keys(t,l,e,r):t,A=y&&typeof y=="object",s=A?y.links:void 0;if(s)for(let f of s){let E=r[r.length-1]=v?i:w({},i);if(g.push(f.key),typeof f.update=="function"){let J=function(){let p="value"in f?f.value:o!==T?o:v?u.get?u.get.call(i):u.value:i[t];return a=H(p)?p.then(M):M(p),x(a)},M=function(p){return p=W(f.key,p,[...e,f.key],r,c,l,P,h),p};var j=J,m=M;let a=T,x=f.update;Object.defineProperty(E,f.key,{get:J,set:p=>(a=p,a)})}else E[f.key]=f.value;ee(f.key,e,r,n,c,l,P,ue(w({},h),{linked:!0}))}let b=A?y.value:y,D=me(b,l,t),U=D?w({},Object.getOwnPropertyDescriptor(l,D)):{},oe=A&&"enumerable"in y?y.enumerable:(S=U.enumerable)!=null?S:!1,C=typeof b,N=A&&"silence"in y?y.silence:!ge(b,l,t)||b==null||b===Y||C!=="string"&&C!=="symbol"&&C==="object"&&!(b instanceof String)&&!(b instanceof Number),k=N?t:b;if(N&&!s)return delete n[t],g;g.push(k);let K=Object.getOwnPropertyDescriptor(n,k);if(K&&K.set&&K.configurable!==!0)n[k]=i[t];else{let f=function(a){return a&&typeof a=="object"&&(d in a&&(a=a[d]),a&&typeof a.valueOf=="function"&&(a=a.valueOf())),o=W(k,a,O,r,c,l,P,h),d in o?o[d]:o},E=function(){var a;let x;if(!N){if(o===T||h.linked){let p=v?u.get?u.get.call(i):u.value:(a=i?i[t]:void 0)!=null?a:$(k,l,t);x=H(p)?p.then(f):f(p)}else x=d in o?o[d]:o;return x}};var m=f,j=E;(!v||(u==null?void 0:u.configurable)!==!1)&&Object.defineProperty(n,k,{get:E,set:u.set?a=>(u.set(a),f(a)):f,enumerable:N?!1:oe,configurable:!1})}return t!==k&&delete n[t],g},W=(t,e,r,n,c,l,P,h)=>{var S;let v=r[r.length-1];e!=null&&e[z]&&(l[t]=e[z]);let i=$(t,l,v),O=c.values?c.values(v,e,i,r,n):e,o=O&&typeof O=="object"&&"value"in O?O.value:O,g=o&&((S=o==null?void 0:o.constructor)==null?void 0:S.name)==="Object",u=typeof o=="symbol"?o:g?w({},o):Array.isArray(o)?[...o]:_(t,o),y=e!=null?e:o;return(g||i&&typeof i=="object")&&B(u,i,c,P,r,[...n,y],{properties:g}),u},te=(t,e,r,n)=>B(t,e,{keys:r},n),re=(t,e,r,n)=>B(t,e,r,n),ne=(t,e,r,n)=>B(t,e,{values:r},n),Oe=class{constructor(t){this.config={},this.set=e=>{this.config=e;let r=this.config.specification;if(Array.isArray(r)){let n=this.config.specification={};r.forEach(c=>I(n,c))}this.specification=this.config.specification},this.apply=(e,r)=>re(e,this.config.specification,this.config,r),this.keys=(e,r)=>te(e,this.config.specification,this.config.keys,r),this.values=(e,r)=>ne(e,this.config.specification,this.config.values,r),this.set(t)}};typeof globalThis.conform!="undefined"?Object.assign(globalThis.conform,R):globalThis.conform=R;})();
//# sourceMappingURL=index.js.map
